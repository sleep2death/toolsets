.flex.flex-col
  // header
  include components/header
  - menuA = []
  - menuB = []
  +header(menuA, menuB)

  // alert
  include components/alert
  
  // user panel
  .container.self-center.grid.grid-cols-1(class="md:grid-cols-2")
    .panel
      .header
        +icon('M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z')
        div Profile
      .body
        form#form-signup.flex.flex-col(data-parsley-validate action="/signup" method="post")
          label(for="email") Email * :
          - var email = form ? form.email : ''
          input(type="email" name="email" data-parsley-trigger="change" value=target.email required)

          - reg = "^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\\W)(?!.* ).{8,16}$"
          label(for="password") Password * :
          - var password = form ? form.password : ''
          input#password(type="password" name="password" data-parsley-trigger="change" data-parsley-pattern=reg value=password required)

          label(for="password") Re-enter Password * :
          - var repassword = form ? form['re-password'] : ''
          input(type="password" class="form-control" name="re-password" data-parsley-equalto="#password" data-parsley-trigger="change" value=repassword required)

          - reg = "^[A-Za-z][A-Za-z0-9_]{4,12}$"
          label(for="nickname") Nickname * :
          - var nickname = form ? form.nickname : ''
          input(type="text" class="form-control" name="nickname" data-parsley-trigger="change" data-parsley-pattern=reg value=target.nickname required)

          .flex.flex-row.self-center.w-full
            input.mt-4.btn(type="submit" value="Update")
    .panel
      .header
        +icon('M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z')
        div Avatar
      .body
        .grid.grid-cols-8
          .col-span-6
            img#image.block(src="/uploads/BlueSky.png")
          .col-span-2
            div.ml-2.preview.w-26.h-26.overflow-hidden.mx-auto
        .flex.flex-row.self-center.w-full
          input#saveAvatar.mt-4.btn(type="submit" value="Save")


script
  include ../node_modules/parsleyjs/dist/parsley.min.js
  include ../node_modules/cropperjs/dist/cropper.min.js
  include ../node_modules/jquery-cropper/dist/jquery-cropper.min.js
script.
  var $image = $('#image');

  $image.cropper({
    aspectRatio: 1 / 1,
    viewMode: 3,
    preview: '.preview',
    crop: function(event) {
    }
  });
  // Get the Cropper.js instance after initialized
  var cropper = $image.data('cropper');
  $('#saveAvatar').on('click', function(evt) {
    evt.preventDefault()
    var croppedimage = cropper.getCroppedCanvas().toDataURL("image/png");
    console.log(croppedimage)
  })
style
  include ../node_modules/cropperjs/dist/cropper.min.css
